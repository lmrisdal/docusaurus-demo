"use strict";(self.webpackChunkdocusaurus_demo=self.webpackChunkdocusaurus_demo||[]).push([[7429],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,g=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(g,s(s({ref:t},u),{},{components:n})):a.createElement(g,s({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1848:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),s=["components"],o={},l="Acknowledgements",c={unversionedId:"Adapters/Outbound/acknowledgment",id:"Adapters/Outbound/acknowledgment",title:"Acknowledgements",description:"- Acknowledgements",source:"@site/docs/Adapters/Outbound/acknowledgment.md",sourceDirName:"Adapters/Outbound",slug:"/Adapters/Outbound/acknowledgment",permalink:"/Adapters/Outbound/acknowledgment",draft:!1,editUrl:"https://github.com/lmrisdal/docusaurus-demo/tree/main/docs/Adapters/Outbound/acknowledgment.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"(S)FTP inbound adapter",permalink:"/Adapters/Inbound/sftp"},next:{title:"Azure Storage Outbound Adapter",permalink:"/Adapters/Outbound/azure-storage"}},u={},d=[{value:"Limitations",id:"limitations",level:2},{value:"Use cases",id:"use-cases",level:2},{value:"Ensuring delivery",id:"ensuring-delivery",level:3},{value:"Reacting to delivery",id:"reacting-to-delivery",level:3},{value:"Keeping track of delivery",id:"keeping-track-of-delivery",level:3},{value:"Configuring Acknowledgments",id:"configuring-acknowledgments",level:2},{value:"Ack Code Component code definition",id:"ack-code-component-code-definition",level:2},{value:"Retry",id:"retry",level:2}],p={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"acknowledgements"},"Acknowledgements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#acknowledgements"},"Acknowledgements"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#limitations"},"Limitations")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-cases"},"Use cases"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#ensuring-delivery"},"Ensuring delivery")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#reacting-to-delivery"},"Reacting to delivery")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#keeping-track-of-delivery"},"Keeping track of delivery")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#configuring-acknowledgments"},"Configuring Acknowledgments")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#ack-code-component-code-definition"},"Ack Code Component code definition")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#retry"},"Retry"))))),(0,i.kt)("p",null,"ConnXio (CX) provides users with the option to receive acknowledgement (ack) events when a message has been delivered to the receiving system. The concept of sending ACK messages is inspired by the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment"},"TCP")," protocol and gives our customers the ability to verify that a message has been delivered successfully in close to real time. When enabled, this feature supplies an external system with an event with contents supplied by using the standard CX ",(0,i.kt)("a",{parentName:"p",href:"/Transformation/code-components"},"code mapping functionality"),", which makes the ACK message extremely powerful as it can contain almost anything, even the delivered message itself. This page describes how to enable this functionality and common use cases."),(0,i.kt)("h2",{id:"limitations"},"Limitations"),(0,i.kt)("p",null,"Be aware that enabling ack messages ",(0,i.kt)("strong",{parentName:"p"},"multiplies traffic by two"),". We count all messages that are sent from CX and ack messages are counted towards this number. Be ready and able to receive the same peak traffic on the ack receiver as on the normal receiving endpoint."),(0,i.kt)("h2",{id:"use-cases"},"Use cases"),(0,i.kt)("p",null,"Ack messages can be used in a variety of scenarios. The most common ones are ensuring delivery, reacting to delivery or keeping track of delivery."),(0,i.kt)("h3",{id:"ensuring-delivery"},"Ensuring delivery"),(0,i.kt)("p",null,"Using ack's you can ensure delivery in the source system by reacting to negative ack messages and resending messages automatically when failures happen. You can also change the delivery status in the source system for later manual processing."),(0,i.kt)("h3",{id:"reacting-to-delivery"},"Reacting to delivery"),(0,i.kt)("p",null,"Reacting to delivery entails performing en action when something is delivered, this could include starting a new CX flow or a separate internal integration pipeline or process. Take en example where a customer is migrated to a new system, and access rights have to be sent after the user is stored in the receiver system. An ack could be sent to update the originating system with the user created status and an automatic process could start the user access update."),(0,i.kt)("p",null,"Reactions could also include alert from internal systems or logging providers like Slack, Teams or Archeo. This can also be handled by ",(0,i.kt)("a",{parentName:"p",href:"/Logging"},"logging events")," but ack messages can represent another pipeline and since the message is ensured delivered it represents an unique opportunity to react to the delivery itself without any extra rules or customization."),(0,i.kt)("h3",{id:"keeping-track-of-delivery"},"Keeping track of delivery"),(0,i.kt)("p",null,"Especially for RESTful Api's keeping track of what has been retrieved can be a hassle. Consider the following scenario: you fetch resources from an Api endpoint that hosts changes to data every 5 minutes and put these changes in an external Api. The polling interval triggers and the data is transferred successfully. 5 minutes passes and the interval triggers again, how do you only migrate the new changes? Well, a simple solution would be to have a separate endpoint that receives events describing what data has been transferred. USing ack messages you map to the correct format and tell the originating Api that the data has been transferred and that the change can be removed from the fetch endpoint. This scenario has its pitfalls and can cause duplicates if the interval is too long or something fails, but these pitfalls are manageable and will enable you to fetch changes from said receiving endpoint successfully.\\\nThis is just one of the many uses for tracking delivery, but this example illustrates the potential benefits of using ack message sin this way."),(0,i.kt)("h2",{id:"configuring-acknowledgments"},"Configuring Acknowledgments"),(0,i.kt)("p",null,'Ack delivery can be configured on all outbound adapters in CX. You can use any outbound adapter to deliver the ack as well. So say you want to deliver the message data itself through Sftp, you can still deliver the ack through Service Bus or Rest to another part of the system or another system entirely. To start sending ack messages enable the "Send Acknowledgment" switch in the outbound adapter window:'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20enable%20on%20adapter.png?sv=2020-08-04&st=2021-11-16T11%3A14%3A39Z&se=2040-11-17T11%3A14%3A00Z&sr=b&sp=r&sig=nxGH1A8rQw7uw1XSoda0nusLAJEh1UW4752GPHGy4GQ%3D",alt:"img"})),(0,i.kt)("p",null,'When you enable the "Send Acknowledgment" switch a menu pops up, if you need to enter this menu at a later time use the "Edit Ack options" button depicted above. Configure the Ack options window like so to start sending ack messages:'),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20Options%20config.png?sv=2020-08-04&st=2022-01-11T12%3A32%3A18Z&se=2040-01-12T12%3A32%3A00Z&sr=b&sp=r&sig=nixBhAC%2BcjSGQl6ql1L6Z0DlaO%2FX0LaHDYZzl%2BwS%2Bj4%3D",alt:"img"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Code Acknowledgement Map (Code Component)"),": The ",(0,i.kt)("em",{parentName:"li"},"Code Component")," is selected as described in the ",(0,i.kt)("a",{parentName:"li",href:"/Transformation/code-components"},"Code Components")," section."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Outbound file format"),": Only applicable if the adapter delivers a file and denotes the file format and ending of the file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Adapter Type"),": The type of adapter to use to deliver the ack message. All adapter configuration is explained under the ",(0,i.kt)("inlineCode",{parentName:"li"},"Adapters")," header.")),(0,i.kt)("p",null,"When acc is enabled for an adapter the adapter will display an icon like this in the master view:"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://cmhpictsa.blob.core.windows.net/pictures/Ack%20icon%20image.png?sv=2020-08-04&st=2021-11-16T11%3A33%3A15Z&se=2040-11-17T11%3A33%3A00Z&sr=b&sp=r&sig=wre4L15vsKCLNXyHC1xrnH6GMe80RCUNvF4AFeROJsk%3D",alt:"img"})),(0,i.kt)("h2",{id:"ack-code-component-code-definition"},"Ack Code Component code definition"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'    public class Initialize\n    {\n        /// <summary>\n        /// The method name must be Map but you can add as many files and other methods that you want, and call them inside Map. But you must use this signature and return a string.\n        /// </summary>\n        /// <param name="message">The message content as it is currently. This changes as the engine runs trough different transformations</param>\n        /// <param name="successful">This value is true if the message was delivered successful to its destination by the outbound adapter</param>\n        /// <param name="dataCollection">The data collection properties you have collected earlier in the transformation pipeline</param>\n        /// <param name="userDefinedProperties">The user defined properties that are transferred with the message metadata. Put variables here to access them later outside message content.</param>\n        /// <returns>A string of the transformed message</returns>\n        public string Map(string message, bool successful, Dictionary<string, string> dataCollection, Dictionary<string, string> userDefinedProperties)\n        {\n            //Add error handling as necessary, this will give better error messages in the logs\n            if (message == null)\n                throw new ArgumentException("Message field is null");\n\n            //You can use newtonsoft and other basic nuget packages. Contact the CX team if you need a non supported package.\n            dynamic obj = JsonConvert.DeserializeObject(message);\n\n            //Creating an instance of the ack message to send\n            CustomAck ack = new CustomAck\n            {\n                Id = obj.Id,\n                SuccessfulDelivery = successful\n            };\n\n            //Return string representation of the ack\n            return JsonConvert.SerializeObject(ack);\n        }\n    }\n\n    public class CustomAck\n    {\n        public string Id { get; set; }\n        public bool SuccessfulDelivery { get; set; }\n    }\n')),(0,i.kt)("h2",{id:"retry"},"Retry"),(0,i.kt)("p",null,"Acknowledgments use the same retry mechanism as the corresponding outbound adapter. Ie. if the ack is sent by Sftp then the retry mechanisms for Sftp is used. These mechanisms are detailed per adapter under the ",(0,i.kt)("inlineCode",{parentName:"p"},"Adapter -> Outbound")," heading."))}m.isMDXComponent=!0}}]);